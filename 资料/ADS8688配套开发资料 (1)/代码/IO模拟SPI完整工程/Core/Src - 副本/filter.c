#include "filter.h"

#include "stdio.h"
#include "arm_math.h"
#include "arm_const_structs.h"

#define LENGTH_SAMPLES  1024    /* 采样点数 */ 
#define NUM_TAPS             29     /* 滤波器系数个数 */ 
#define BLOCK_SIZE           LENGTH_SAMPLES     /* 调用一次arm_fir_f32处理的采样点个数，甚至可以一次1024个 */ 

static float32_t firStateF32[BLOCK_SIZE + NUM_TAPS - 1];        /* 状态缓存，大小numTaps + BLOCK_SIZE - 1*/ 
 
arm_fir_instance_f32 S; 

const float32_t firCoeffs32LP[NUM_TAPS] = { 
  0.0003092442489401, 0.005410169953458, 0.007071358033292, 0.006995747122657,
   0.001782251870561,-0.008758951300406, -0.02149717457897, -0.02990710381809,
   -0.02598404077838,-0.003597649257985,  0.03807758839782,  0.09274987652958,
     0.1480270458251,   0.1891964945905,   0.2044274539633,   0.1891964945905,
     0.1480270458251,  0.09274987652958,  0.03807758839782,-0.003597649257985,
   -0.02598404077838, -0.02990710381809, -0.02149717457897,-0.008758951300406,
   0.001782251870561, 0.006995747122657, 0.007071358033292, 0.005410169953458,
  0.0003092442489401
};	

void fir_init()
{
	arm_fir_init_f32(&S, NUM_TAPS, (float32_t *)&firCoeffs32LP[0], &firStateF32[0], BLOCK_SIZE);
}
